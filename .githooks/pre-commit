#!/bin/sh

# Ensure CHANGELOG.md is updated with every commit.
# Skip with: SKIP_CHANGELOG=1 git commit -m "..."

if [ "$SKIP_CHANGELOG" = "1" ]; then
  exit 0
fi

if git diff --cached --name-only | grep -q '^CHANGELOG.md$'; then
  exit 0
fi

echo ""
echo "  CHANGELOG.md was not updated."
echo ""
echo "  Please add a changelog entry, or skip with:"
echo "    SKIP_CHANGELOG=1 git commit -m \"your message\""
echo ""
exit 1
